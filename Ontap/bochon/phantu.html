<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Bài thực hành số 1</title>
		
		<style>
			
			#sourceCode1, iframe, #sourceCode2 {			
    			height: 300px;
    			font-size:20px;	  			
			}
			#sourceCode1, #sourceCode2,iframe, #btn1, #btn2,#btn3 {						
    			width: 100%;	  			
			}
			#btn1, #btn2,#btn3{
			height:35px; background: #33ff77;font-size:25px;

			}
			#sourceCode2, #btn3 {
				display:none;
			}
			#wrong{display:none;}
		</style>

			
	</head>
    <body>
<form>
<textarea name="sourceCode" id="sourceCode1">
<!DOCTYPE html>
<html>
       <head>
          <style>

          </style>
       </head>
       <body>
           <h1>Bài tập CSS</h1>
            <p>Đoạn văn bản thứ nhất.</p>
            <p>Đoạn văn bản thứ hai.</p>
       </body>
</html>
  </textarea>

<textarea name="sourceCode" id="sourceCode2">
<html>
       <head>
          <style>
	h1{
 	color:red;	
	}
          </style>
       </head>
       <body>
           <h1>Bài tập CSS</h1>
            <p>Đoạn văn bản thứ nhất.</p>
            <p>Đoạn văn bản thứ hai.</p>
       </body>
</html>
  </textarea>
<textarea name="sourceCode" id="wrong">
<html>
       <head>
	<style>body{background:black;color:white;}
		span{color:yellow;}
	</style>
       </head>
       <body>
           <h1>Rất tiếc!</h1>
 <h3>Đừng vội xem đáp án. Hãy nhấn <span>Làm lại bài tập</span> và cố gắng thêm tí nữa!</h1>
       </body>
</html>
  </textarea>
 <input id="btn1" onclick="runCode1();" type="button" value="Chạy thử">
<input id="btn2" onclick="runCode2();" type="button" value="Xem đáp án">
<input id="btn3" onclick="runCode3();" type="button" value="Làm lại bài tập">
</form>

<iframe name="targetCode" id="targetCode"></iframe>
 
        <script type="text/javascript">
	 const code1 = document.getElementById('sourceCode1');
	 const code2 = document.getElementById('sourceCode2');
	 const btn1 = document.getElementById('btn1');
	 const btn2 = document.getElementById('btn2');
	const wrong = document.getElementById('wrong');
	
            function runCode1()
            {
                 btn2.style.display = "block";
	
	var content = document.getElementById('sourceCode1').value;
	 var patt = /[<style>h1{color:red;}</style>]/g;
  	var result = content.match(patt).join("");
	if(result.includes('<style>h1{color:red;}</style>',0)==false){
		btn1.style.display = "none";
		btn3.style.display = "block";	
		var alert= document.getElementById('wrong').value;
		var iframe = document.getElementById('targetCode');
               		 iframe = (iframe.contentWindow) ? iframe.contentWindow : (iframe.contentDocument.document) ? iframe.contentDocument.document : iframe.contentDocument;
                		iframe.document.open();
                		iframe.document.write(alert);
                		iframe.document.close();
	}
	else
	{	
                var iframe = document.getElementById('targetCode');
                iframe = (iframe.contentWindow) ? iframe.contentWindow : (iframe.contentDocument.document) ? iframe.contentDocument.document : iframe.contentDocument;
                iframe.document.open();
                iframe.document.write(content);
                iframe.document.close();
	}
                return false;
            }
          function runCode2()
            {         
                code1.style.display = "none";
                code2.style.display = "block";
                 btn1.style.display = "none";
                 btn2.style.display = "none";
	btn3.style.display = "block";	
	var content = document.getElementById('sourceCode2').value;
                var iframe = document.getElementById('targetCode');
                iframe = (iframe.contentWindow) ? iframe.contentWindow : (iframe.contentDocument.document) ? iframe.contentDocument.document : iframe.contentDocument;
                iframe.document.open();
                iframe.document.write(content);
                iframe.document.close();
                return false;
            }
      function runCode3()
            {
                 btn1.style.display = "block";
                 btn2.style.display = "block";
	btn3.style.display = "none";
                code1.style.display = "block";
                code2.style.display = "none";
               var iframe = document.getElementById('targetCode');
                iframe = (iframe.contentWindow) ? iframe.contentWindow : (iframe.contentDocument.document) ? iframe.contentDocument.document : iframe.contentDocument;
                iframe.document.open();
                iframe.document.write("");
                iframe.document.close();
                return false;
            }
           // runCode1();
        </script>
    </body>
</html>